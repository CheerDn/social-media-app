!function(e){function a(a){for(var n,s,o=a[0],c=a[1],i=a[2],m=0,d=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(l,s)&&l[s]&&d.push(l[s][0]),l[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(u&&u(a);d.length;)d.shift()();return r.push.apply(r,i||[]),t()}function t(){for(var e,a=0;a<r.length;a++){for(var t=r[a],n=!0,o=1;o<t.length;o++){var c=t[o];0!==l[c]&&(n=!1)}n&&(r.splice(a--,1),e=s(s.s=t[0]))}return e}var n={},l={0:0},r=[];function s(a){if(n[a])return n[a].exports;var t=n[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.e=function(e){var a=[],t=l[e];if(0!==t)if(t)a.push(t[2]);else{var n=new Promise((function(a,n){t=l[e]=[a,n]}));a.push(t[2]=n);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=function(e){return s.p+""+({}[e]||e)+"."+{2:"11f4dd0b1853ff15ac0d",3:"ee1362544360a94dbe46",4:"7de20af4e35063e81980",5:"b4a345b9ce0f69b50f19",6:"b10a6b20d2958e135d23",7:"e0bb1b69a06ea9fe2d7b"}[e]+".js"}(e);var c=new Error;r=function(a){o.onerror=o.onload=null,clearTimeout(i);var t=l[e];if(0!==t){if(t){var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",c.name="ChunkLoadError",c.type=n,c.request=r,t[1](c)}l[e]=void 0}};var i=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(a)},s.m=e,s.c=n,s.d=function(e,a,t){s.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,a){if(1&a&&(e=s(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)s.d(t,n,function(a){return e[a]}.bind(null,n));return t},s.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(a,"a",a),a},s.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},s.p="",s.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=a,o=o.slice();for(var i=0;i<o.length;i++)a(o[i]);var u=c;r.push([64,1]),t()}({10:function(e,a,t){"use strict";var n=t(0);const l=Object(n.createContext)();a.a=l},11:function(e,a,t){"use strict";var n=t(0),l=t.n(n);a.a=function(){return l.a.createElement("div",{className:"dots-loading"},l.a.createElement("div",null))}},16:function(e,a,t){"use strict";var n=t(0),l=t.n(n),r=t(3);a.a=function(e){const a=e.post,t=new Date(a.createdDate),n=`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`;return l.a.createElement(r.b,{onClick:e.onClick,to:`/post/${a._id}`,className:"list-group-item list-group-item-action"},l.a.createElement("img",{className:"avatar-tiny",src:a.author.avatar})," ",l.a.createElement("strong",null,a.title)," ",l.a.createElement("span",{className:"text-muted small"},!e.noAuthor&&l.a.createElement(l.a.Fragment,null,"by ",a.author.username)," on ",n," "))}},17:function(e,a,t){"use strict";var n=t(0),l=t.n(n),r=t(6),s=t(3);a.a=function(){return l.a.createElement(r.a,{title:"Not Found"},l.a.createElement("div",{className:"text-center"},l.a.createElement("h2",null,"Woops, we cannot find that page"),l.a.createElement("p",{className:"lead text-muted"},"You can always visit the ",l.a.createElement(s.b,{to:"/"},"homepage")," to get a fresh start.")))}},39:function(e,a,t){},5:function(e,a,t){"use strict";var n=t(0);const l=Object(n.createContext)();a.a=l},6:function(e,a,t){"use strict";var n=t(0),l=t.n(n);var r=e=>l.a.createElement("div",{className:"container py-md-5 "+(e.wide?"":"container--narrow")},e.children);a.a=e=>(Object(n.useEffect)(()=>{document.title=`${e.title} | SocialMediaApp`,window.scroll(0,0)},[e.title]),l.a.createElement(r,{wide:e.wide},e.children))},64:function(e,a,t){"use strict";t.r(a);t(39);var n=t(0),l=t.n(n),r=t(18),s=t.n(r),o=t(14),c=t(3),i=t(15),u=t(2),m=t.n(u),d=t(66),p=t(5),f=t(10);var g=function(e){const[a,t]=Object(n.useState)(),[r,s]=Object(n.useState)(),o=Object(n.useContext)(f.a);return l.a.createElement("form",{onSubmit:async function(e){e.preventDefault();try{const e=await m.a.post("/login",{username:a,password:r});e.data?(o({type:"login",data:e.data}),o({type:"flashMessage",value:"You have successfully logged in."})):(console.log("incorrect username / password"),o({type:"flashMessage",value:"Invalid username / password."}))}catch(e){console.log(e)}},className:"mb-0 pt-2 pt-md-0"},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-md mr-0 pr-md-0 mb-3 mb-md-0"},l.a.createElement("input",{onChange:e=>t(e.target.value),name:"username",className:"form-control form-control-sm input-dark",type:"text",placeholder:"Username",autoComplete:"off"})),l.a.createElement("div",{className:"col-md mr-0 pr-md-0 mb-3 mb-md-0"},l.a.createElement("input",{onChange:e=>s(e.target.value),name:"password",className:"form-control form-control-sm input-dark",type:"password",placeholder:"Password"})),l.a.createElement("div",{className:"col-md-auto"},l.a.createElement("button",{className:"btn btn-success btn-sm"},"Sign In"))))},h=t(19);var v=function(e){const a=Object(n.useContext)(f.a),t=Object(n.useContext)(p.a);return l.a.createElement("div",{className:"flex-row my-3 my-md-0"},l.a.createElement("a",{"data-for":"search","data-tip":"Search",onClick:function(e){e.preventDefault(),a({type:"openSearch"})},href:"#",className:"text-white mr-2 header-search-icon"},l.a.createElement("i",{className:"fas fa-search"})),l.a.createElement(h.a,{place:"bottom",id:"search",className:"custom-tooltip"})," ",l.a.createElement("span",{onClick:()=>a({type:"toggleChat"}),"data-for":"chat","data-tip":"Chat",className:"mr-2 header-chat-icon "+(t.unreadChatCount?"text-danger":"text-white")},l.a.createElement("i",{className:"fas fa-comment"}),t.unreadChatCount?l.a.createElement("span",{className:"chat-count-badge text-white"},t.unreadChatCount<10?t.unreadChatCount:"9+"):""),l.a.createElement(h.a,{place:"bottom",id:"chat",className:"custom-tooltip"})," ",l.a.createElement(c.b,{"data-for":"profile","data-tip":"My Profile",to:`/profile/${t.user.username}`,className:"mr-2"},l.a.createElement("img",{className:"small-header-avatar",src:t.user.avatar})),l.a.createElement(h.a,{place:"bottom",id:"profile",className:"custom-tooltip"})," ",l.a.createElement(c.b,{className:"btn btn-sm btn-success mr-2",to:"/create-post"},"Create Post")," ",l.a.createElement("button",{onClick:function(){a({type:"logout"}),a({type:"flashMessage",value:"You have successfully logged out."})},className:"btn btn-sm btn-secondary"},"Sign Out"))};var b=function(e){const a=Object(n.useContext)(p.a);return l.a.createElement("header",{className:"header-bar bg-primary mb-3"},l.a.createElement("div",{className:"container d-flex flex-column flex-md-row align-items-center p-3"},l.a.createElement("h4",{className:"my-0 mr-md-auto font-weight-normal"},l.a.createElement(c.b,{to:"/",className:"text-white"},"SocialMediaApp")),a.loggedIn?l.a.createElement(v,null):l.a.createElement(g,null)))},E=t(6);var y=function(){const e=Object(n.useContext)(f.a),[a,t]=Object(o.b)((function(e,a){switch(a.type){case"usernameImmediately":return e.username.hasErrors=!1,e.username.value=a.value,e.username.value.length>30&&(e.username.hasErrors=!0,e.username.message="Username cannot exceed 30 characters."),void(e.username.value&&!/^([a-zA-Z0-9]+)$/.test(e.username.value)&&(e.username.hasErrors=!0,e.username.message="Username can only contains letters and numbers."));case"usernameAfterDelay":return e.username.value.length<3&&(e.username.hasErrors=!0,e.username.message="Username must at least 3 characters."),void(e.hasErrors||a.noRequest||e.username.checkCount++);case"usernameDuplicate":return void(a.value?(e.username.hasErrors=!0,e.username.isUnique=!1,e.username.message="That username is already taken."):e.username.isUnique=!0);case"emailImmediately":return e.email.hasErrors=!1,void(e.email.value=a.value);case"emailAfterDelay":return/^\S+@\S+$/.test(e.email.value)||(e.email.hasErrors=!0,e.email.message="You must provide a valid email address."),void(e.email.hasErrors||a.noRequest||e.email.checkCount++);case"emailDuplicate":return void(a.value?(e.email.hasErrors=!0,e.email.isUnique=!1,e.email.message="That email is already be used."):e.email.isUnique=!0);case"passwordImmediately":return e.password.hasErrors=!1,e.password.value=a.value,void(e.password.value.length>50&&(e.password.hasErrors=!0,e.password.message="Password cannot exceed 50 characters."));case"passwordAfterDelay":return void(e.password.value.length<12&&(e.password.hasErrors=!0,e.password.message="Password must be at least 12 characters."));case"submitForm":return void(e.username.hasErrors||!e.username.isUnique||e.email.hasErrors||!e.email.isUnique||e.password.hasErrors||e.submitCount++)}}),{username:{value:"",hasErrors:!1,message:"",isUnique:"",checkCount:0},email:{value:"",hasErrors:!1,message:"",isUnique:"",checkCount:0},password:{value:"",hasErrors:!1,message:"",checkCount:0},submitCount:0});return Object(n.useEffect)(()=>{if(a.username.value){const e=setTimeout(()=>t({type:"usernameAfterDelay"}),800);return()=>clearTimeout(e)}},[a.username.value]),Object(n.useEffect)(()=>{if(a.email.value){const e=setTimeout(()=>t({type:"emailAfterDelay"}),800);return()=>clearTimeout(e)}},[a.email.value]),Object(n.useEffect)(()=>{if(a.password.value){const e=setTimeout(()=>t({type:"passwordAfterDelay"}),800);return()=>clearTimeout(e)}},[a.password.value]),Object(n.useEffect)(()=>{if(a.username.checkCount){const e=m.a.CancelToken.source();return async function(){try{const n=await m.a.post("/doesUsernameExist",{username:a.username.value},{cancelToken:e.token});t({type:"usernameDuplicate",value:n.data})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>e.cancel()}},[a.username.checkCount]),Object(n.useEffect)(()=>{if(a.email.checkCount){const e=m.a.CancelToken.source();return async function(){try{const n=await m.a.post("/doesEmailExist",{email:a.email.value},{cancelToken:e.token});t({type:"emailDuplicate",value:n.data})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>e.cancel()}},[a.email.checkCount]),Object(n.useEffect)(()=>{if(a.submitCount){const t=m.a.CancelToken.source();return async function(){try{const n=await m.a.post("/register",{username:a.username.value,email:a.email.value,password:a.password.value},{cancelToken:t.token});e({type:"login",data:n.data}),e({type:"flashMessage",value:"Congrats! Welcome to your new account."})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>t.cancel()}},[a.submitCount]),l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{title:"Welcome",wide:!0},l.a.createElement("div",{className:"row align-items-center"},l.a.createElement("div",{className:"col-lg-7 py-3 py-md-5"},l.a.createElement("h1",{className:"display-3"},"Remember Writing?"),l.a.createElement("p",{className:"lead text-muted"},"Are you sick of short tweets and impersonal “shared” posts that are reminiscent of the late 90’s email forwards? We believe getting back to actually writing is the key to enjoying the internet again.")),l.a.createElement("div",{className:"col-lg-5 pl-lg-5 pb-3 py-lg-5"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({type:"usernameImmediately",value:a.username.value}),t({type:"usernameAfterDelay",value:a.username.value,noRequest:!0}),t({type:"emailImmediately",value:a.email.value}),t({type:"emailAfterDelay",value:a.email.value,noRequest:!0}),t({type:"passwordImmediately",value:a.password.value}),t({type:"passwordAfterDelay",value:a.password.value,noRequest:!0}),t({type:"submitForm"})}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username-register",className:"text-muted mb-1"},l.a.createElement("small",null,"Username")),l.a.createElement("input",{onChange:e=>t({type:"usernameImmediately",value:e.target.value}),id:"username-register",name:"username",className:"form-control",type:"text",placeholder:"Pick a username",autoComplete:"off"}),l.a.createElement(d.a,{in:a.username.hasErrors,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0},l.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"},a.username.message))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email-register",className:"text-muted mb-1"},l.a.createElement("small",null,"Email")),l.a.createElement("input",{onChange:e=>t({type:"emailImmediately",value:e.target.value}),id:"email-register",name:"email",className:"form-control",type:"text",placeholder:"you@example.com",autoComplete:"off"}),l.a.createElement(d.a,{in:a.email.hasErrors,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0},l.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"},a.email.message))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password-register",className:"text-muted mb-1"},l.a.createElement("small",null,"Password")),l.a.createElement("input",{onChange:e=>t({type:"passwordImmediately",value:e.target.value}),id:"password-register",name:"password",className:"form-control",type:"password",placeholder:"Create a password"}),l.a.createElement(d.a,{in:a.password.hasErrors,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0},l.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"},a.password.message))),l.a.createElement("button",{type:"submit",className:"py-3 mt-4 btn btn-lg btn-success btn-block"},"Sign up for ComplexApp"))))))},w=t(11),C=t(16);var k=function(){const e=Object(n.useContext)(p.a),[a,t]=(Object(n.useContext)(f.a),Object(o.a)({isLoading:!0,feed:[]}));return Object(n.useEffect)(()=>{const a=m.a.CancelToken.source();return async function(){try{const n=await m.a.post("/getHomeFeed",{token:e.user.token},{cancelToken:a.token});t(e=>{e.isLoading=!1,e.feed=n.data})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{a.cancel()}},[]),a.isLoading?l.a.createElement(w.a,null):l.a.createElement(E.a,{title:"Your Feed"},a.feed.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"text-center mb-4"},"The Latest From Those you follow"),l.a.createElement("div",{className:"list-group"},a.feed.map(e=>l.a.createElement(C.a,{post:e,key:e._id})))),0==a.feed.length&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"text-center"},"Hello ",l.a.createElement("strong",null,e.user.username),", your feed is empty."),l.a.createElement("p",{className:"lead text-muted text-center"},"Your feed displays the latest posts from the people you follow. If you don’t have any friends to follow that’s okay; you can use the “Search” feature in the top menu bar to find content written by people with similar interests and then follow them.")))};var N=()=>l.a.createElement("div",null,l.a.createElement("footer",{className:"border-top text-center small text-muted py-3"},l.a.createElement("p",null,l.a.createElement(c.b,{to:"/",className:"mx-1"},"Home")," ","|"," ",l.a.createElement(c.b,{className:"mx-1",to:"/about-us"},"About Us")," ","|"," ",l.a.createElement(c.b,{className:"mx-1",to:"/terms"},"Terms")),l.a.createElement("p",{className:"m-0"},"Copyright © 2020"," ",l.a.createElement(c.b,{to:"/",className:"text-muted"},"SocialMediaApp"),". All rights reserved.")));var x=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{title:"About Us"},l.a.createElement("h2",null,"About Us"),l.a.createElement("p",{className:"lead text-muted"},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis dolorum labore quisquam vel id dicta fuga! Ducimus, quo. Dolore commodi aliquid error veritatis consequuntur, excepturi cumque fuga eum incidunt doloremque?"),l.a.createElement("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. At qui enim rem totam voluptatum. Aut saepe temporibus, facilis ex a iste expedita minima dolorum dicta doloribus libero aliquid, quae maxime? Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat suscipit beatae eum, est soluta ducimus ratione et impedit sapiente, nihil, atque dignissimos adipisci? Totam atque officia quis voluptates sed veniam?"),l.a.createElement("p",null,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptates quisquam possimus tenetur, dicta enim rerum quis, quaerat id nobis provident quo dolorum sapiente temporibus facere non repellendus consequatur cupiditate!")));var q=()=>l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{title:"Terms and Conditions"},l.a.createElement("h2",null,"Our Terms & Conditions"),l.a.createElement("p",{className:"lead text-muted"},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis dolorum labore quisquam vel id dicta fuga! Ducimus, quo. Dolore commodi aliquid error veritatis consequuntur, excepturi cumque fuga eum incidunt doloremque?"),l.a.createElement("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. At qui enim rem totam voluptatum. Aut saepe temporibus, facilis ex a iste expedita minima dolorum dicta doloribus libero aliquid, quae maxime? Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat suscipit beatae eum, est soluta ducimus ratione et impedit sapiente, nihil, atque dignissimos adipisci? Totam atque officia quis voluptates sed veniam?"),l.a.createElement("p",null,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Expedita voluptates quisquam possimus tenetur, dicta enim rerum quis, quaerat id nobis provident quo dolorum sapiente temporibus facere non repellendus consequatur cupiditate!"),l.a.createElement("h3",null,"Details"),l.a.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae laboriosam distinctio atque sint earum? Temporibus, voluptas aspernatur aliquam nisi sed harum laborum, nemo odio animi officia quisquam. Veniam, natus reprehenderit.")));var O=function(e){return l.a.createElement("div",{className:"floating-alerts"},e.messages.map((e,a)=>l.a.createElement("div",{key:a,className:"alert alert-success text-center floating-alert shadow-sm"},e)))};var T=function(){const{username:e}=Object(i.g)(),[a,t]=Object(n.useState)(!0),[r,s]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const a=m.a.CancelToken.source();return async function(){try{const n=await m.a.get(`/profile/${e}/posts`,{cancelToken:a.token});s(n.data),t(!1)}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{a.cancel()}},[e]),a?l.a.createElement(w.a,null):l.a.createElement("div",{className:"list-group"},r.map(e=>l.a.createElement(C.a,{post:e,key:e._id,noAuthor:!0})))};var j=function(){const e=Object(n.useContext)(p.a),{username:a}=Object(i.g)(),[t,r]=Object(n.useState)(!0),[s,o]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const e=m.a.CancelToken.source();return async function(){try{const t=await m.a.get(`/profile/${a}/followers`,{cancelToken:e.token});o(t.data),r(!1)}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{e.cancel()}},[a]),t?l.a.createElement(w.a,null):l.a.createElement("div",{className:"list-group"},s.map((e,a)=>l.a.createElement(c.b,{key:a,to:`/profile/${e.username}`,className:"list-group-item list-group-item-action"},l.a.createElement("img",{className:"avatar-tiny",src:e.avatar})," ",e.username)),0==s.length&&e.user.username==a&&l.a.createElement("p",{className:"lead text-muted text-center"},"You don’t have any followers yet."),0==s.length&&e.user.username!=a&&l.a.createElement("p",{className:"lead text-muted text-center"},a," doesn’t have any followers yet.",e.loggedIn&&" Be the first to follow!",!e.loggedIn&&l.a.createElement(l.a.Fragment,null," ","If you want to follow, you need to ",l.a.createElement(c.b,{to:"/"},"sign up")," for an account first."," ")))};var S=function(){const e=Object(n.useContext)(p.a),{username:a}=Object(i.g)(),[t,r]=Object(n.useState)(!0),[s,o]=Object(n.useState)([]);return Object(n.useEffect)(()=>{const e=m.a.CancelToken.source();return async function(){try{const t=await m.a.get(`/profile/${a}/following`,{cancelToken:e.token});o(t.data),r(!1)}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{e.cancel()}},[a]),t?l.a.createElement(w.a,null):l.a.createElement("div",{className:"list-group"},s.map((e,a)=>l.a.createElement(c.b,{key:a,to:`/profile/${e.username}`,className:"list-group-item list-group-item-action"},l.a.createElement("img",{className:"avatar-tiny",src:e.avatar})," ",e.username)),0==s.length&&e.user.username==a&&l.a.createElement("p",{className:"lead text-muted text-center"},"You aren’t following anyone yet."),0==s.length&&e.user.username!=a&&l.a.createElement("p",{className:"lead text-muted text-center"},a," isn’t following anyone yet."))};var F=function(){const{username:e}=Object(i.g)(),a=Object(n.useContext)(p.a),[t,r]=Object(o.a)({followActionLoading:!1,startFollowingRequestCount:0,stopFollowingRequestCount:0,profileData:{profileUsername:"...",profileAvatar:"https://gravatar.com/avatar/placeholder?s=128",isFollowing:!1,counts:{postCount:0,followerCount:0,followingCount:0}}});return Object(n.useEffect)(()=>{const t=m.a.CancelToken.source();return async function(){try{const n=await m.a.post(`/profile/${e}`,{token:a.user.token},{cancelToken:t.token});r(e=>{e.profileData=n.data})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{t.cancel()}},[e]),Object(n.useEffect)(()=>{if(t.startFollowingRequestCount){r(e=>{e.followActionLoading=!0});const e=m.a.CancelToken.source();return async function(){try{await m.a.post(`/addFollow/${t.profileData.profileUsername}`,{token:a.user.token},{cancelToken:e.token});r(e=>{e.profileData.isFollowing=!0,e.profileData.counts.followerCount++,e.followActionLoading=!1})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{e.cancel()}}},[t.startFollowingRequestCount]),Object(n.useEffect)(()=>{if(t.stopFollowingRequestCount){r(e=>{e.followActionLoading=!0});const e=m.a.CancelToken.source();return async function(){try{await m.a.post(`/removeFollow/${t.profileData.profileUsername}`,{token:a.user.token},{cancelToken:e.token});r(e=>{e.profileData.isFollowing=!1,e.profileData.counts.followerCount--,e.followActionLoading=!1})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{e.cancel()}}},[t.stopFollowingRequestCount]),l.a.createElement(E.a,{title:"Profile Screen"},l.a.createElement("h2",null,l.a.createElement("img",{className:"avatar-small",src:t.profileData.profileAvatar})," ",t.profileData.profileUsername,a.loggedIn&&!t.profileData.isFollowing&&a.user.username!=t.profileData.profileUsername&&"..."!=t.profileData.profileUsername&&l.a.createElement("button",{onClick:function(){r(e=>{e.startFollowingRequestCount++})},disabled:t.followActionLoading,className:"btn btn-primary btn-sm ml-2"},"Follow ",l.a.createElement("i",{className:"fas fa-user-plus"})),a.loggedIn&&t.profileData.isFollowing&&a.user.username!=t.profileData.profileUsername&&"..."!=t.profileData.profileUsername&&l.a.createElement("button",{onClick:function(){r(e=>{e.stopFollowingRequestCount++})},disabled:t.followActionLoading,className:"btn btn-danger btn-sm ml-2"},"Stop Following ",l.a.createElement("i",{className:"fas fa-user-times"}))),l.a.createElement("div",{className:"profile-nav nav nav-tabs pt-2 mb-4"},l.a.createElement(c.c,{exact:!0,to:`/profile/${t.profileData.profileUsername}`,className:"nav-item nav-link"},"Post: ",t.profileData.counts.postCount),l.a.createElement(c.c,{to:`/profile/${t.profileData.profileUsername}/follower`,className:"nav-item nav-link"},"Follower: ",t.profileData.counts.followerCount),l.a.createElement(c.c,{to:`/profile/${t.profileData.profileUsername}/following`,className:"nav-item nav-link"},"Following: ",t.profileData.counts.followingCount)),l.a.createElement(i.d,null,l.a.createElement(i.b,{exact:!0,path:"/profile/:username"},l.a.createElement(T,null)),l.a.createElement(i.b,{path:"/profile/:username/follower"},l.a.createElement(j,null)),l.a.createElement(i.b,{path:"/profile/:username/following"},l.a.createElement(S,null))))},D=t(17);var A=function(){const e=Object(n.useContext)(p.a),a=Object(n.useContext)(f.a),t={title:{value:"",hasErrors:!1,message:""},body:{value:"",hasErrors:!1,message:""},isFetching:!0,isSaving:!1,id:Object(i.g)().id,sendCount:0,notFound:!1,permissionProblem:!1},[r,s]=Object(o.b)((function(a,t){switch(t.type){case"fetchComplete":return a.title.value=t.value.title,a.body.value=t.value.body,a.isFetching=!1,void(e.user.username!=t.value.author.username&&(a.permissionProblem=!0));case"titleChange":return a.title.hasErrors=!1,void(a.title.value=t.value);case"bodyChange":return a.body.hasErrors=!1,void(a.body.value=t.value);case"submitRequest":return void(!a.title.hasErrors&&a.body.hasErrors&&a.sendCount++);case"saveRequestStarted":return void(a.isSaving=!0);case"saveRequestFinished":return void(a.isSaving=!1);case"titleRules":return void(t.value.trim()?a.title.hasErrors=!1:(a.title.hasErrors=!0,a.title.message="You must provide a title."));case"bodyRules":return void(t.value.trim()?a.body.hasErrors=!1:(a.body.hasErrors=!0,a.body.message="You must provide body content."));case"notFound":return void(a.notFound=!0)}}),t);return Object(n.useEffect)(()=>{const e=m.a.CancelToken.source();return async function(){try{const a=await m.a.get(`/post/${r.id}`,{cancelToken:e.token});a.data?s({type:"fetchComplete",value:a.data}):s({type:"notFound"})}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>{e.cancel()}},[]),Object(n.useEffect)(()=>{if(r.sendCount){s({type:"saveRequestStarted"});const t=m.a.CancelToken.source();return async function(){try{await m.a.post(`/post/${r.id}/edit`,{title:r.title.value,body:r.body.value,token:e.user.token},{cancelToken:t.token});s({type:"saveRequestFinished"}),a({type:"flashMessage",value:"Post updated!"})}catch(e){console.log(e),console.log("There was a problem or the request might be cancelled")}}(),()=>{t.cancel()}}},[r.sendCount]),r.notFound?l.a.createElement(D.a,null):r.permissionProblem?(a({type:flashMessage,value:" You do not have permission to edit that post"}),l.a.createElement(i.a,{to:"/"})):r.isFetching?l.a.createElement(E.a,{title:"..."},l.a.createElement(w.a,null)):l.a.createElement(E.a,{title:"Edit Post"},l.a.createElement(c.b,{to:`/post/${r.id}`,className:"small font-weight-bold"},"« Back to post"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s({type:"titleRules",value:r.title.value}),s({type:"bodyRules",value:r.body.value}),s({type:"submitRequest"})},className:"mt-3"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"post-title",className:"text-muted mb-1"},l.a.createElement("small",null,"Title")),l.a.createElement("input",{onBlur:e=>s({type:"titleRules",value:e.target.value}),onChange:e=>s({type:"titleChange",value:e.target.value}),value:r.title.value,autoFocus:!0,name:"title",id:"post-title",className:"form-control form-control-lg form-control-title",type:"text",placeholder:"",autoComplete:"off"}),r.title.hasErrors&&l.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"}," ",r.title.message)),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"post-body",className:"text-muted mb-1 d-block"},l.a.createElement("small",null,"Body Content")),l.a.createElement("textarea",{onBlur:e=>s({type:"bodyRules",value:e.target.value}),onChange:e=>s({type:"bodyChange",value:e.target.value}),name:"body",id:"post-body",className:"body-content tall-textarea form-control",type:"text",value:r.body.value}),r.body.hasErrors&&l.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"}," ",r.body.message)),l.a.createElement("button",{disabled:r.isSaving,className:"btn btn-primary"},"Save Update")))};m.a.defaults.baseURL="http://localhost:8080";const I=l.a.lazy(()=>t.e(5).then(t.bind(null,215))),U=l.a.lazy(()=>Promise.all([t.e(2),t.e(7)]).then(t.bind(null,216))),M=l.a.lazy(()=>t.e(6).then(t.bind(null,217))),P=l.a.lazy(()=>Promise.all([t.e(3),t.e(4)]).then(t.bind(null,218)));s.a.render(l.a.createElement((function(){const e={loggedIn:Boolean(localStorage.getItem("socialmediaappToken")),flashMessages:[],user:{token:localStorage.getItem("socialmediaappToken"),username:localStorage.getItem("socialmediaappUsername"),avatar:localStorage.getItem("socialmediaappAvatar")},isSearchOpen:!1,isChatOpen:!1,unreadChatCount:0},[a,t]=Object(o.b)((function(e,a){switch(a.type){case"login":return e.loggedIn=!0,void(e.user=a.data);case"logout":return void(e.loggedIn=!1);case"flashMessage":return void e.flashMessages.push(a.value);case"openSearch":return void(e.isSearchOpen=!0);case"closeSearch":return void(e.isSearchOpen=!1);case"toggleChat":return void(e.isChatOpen=!e.isChatOpen);case"closeChat":return void(e.isChatOpen=!1);case"incrementUnreadChatCount":return void e.unreadChatCount++;case"clearUnreadChatCount":return void(e.unreadChatCount=0)}}),e);return Object(n.useEffect)(()=>{a.loggedIn?(localStorage.setItem("socialmediaappToken",a.user.token),localStorage.setItem("socialmediaappUsername",a.user.username),localStorage.setItem("socialmediaappAvatar",a.user.avatar)):(localStorage.removeItem("socialmediaappToken"),localStorage.removeItem("socialmediaappUsername"),localStorage.removeItem("socialmediaappAvatar"))},[a.loggedIn]),Object(n.useEffect)(()=>{if(a.loggedIn){const e=m.a.CancelToken.source();return async function(){try{(await m.a.post("/checkToken",{token:a.user.token},{cancelToken:e.token})).data||(t({type:"logout"}),t({type:"flashMessage",value:"Your session has expired. Please login again"}))}catch(e){console.log("There was a problem or the request might be cancelled")}}(),()=>e.cancel()}},[]),l.a.createElement(p.a.Provider,{value:a},l.a.createElement(f.a.Provider,{value:t},l.a.createElement(c.a,null,l.a.createElement(O,{messages:a.flashMessages}),l.a.createElement(b,null),l.a.createElement(n.Suspense,{fallback:l.a.createElement(w.a,null)},l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/profile/:username"},l.a.createElement(F,null)),l.a.createElement(i.b,{path:"/",exact:!0},a.loggedIn?l.a.createElement(k,null):l.a.createElement(y,null)),l.a.createElement(i.b,{path:"/create-post"},l.a.createElement(I,null)),l.a.createElement(i.b,{path:"/post/:id",exact:!0},l.a.createElement(U,null)),l.a.createElement(i.b,{path:"/post/:id/edit",exact:!0},l.a.createElement(A,null)),l.a.createElement(i.b,{path:"/about-us",exact:!0},l.a.createElement(x,null)),l.a.createElement(i.b,{path:"/terms",exact:!0},l.a.createElement(q,null)),l.a.createElement(i.b,null,l.a.createElement(D.a,null)))),l.a.createElement(d.a,{timeout:330,in:a.isSearchOpen,classNames:"search-overlay",unmountOnExit:!0},l.a.createElement("div",{className:"Search-overlay"},l.a.createElement(n.Suspense,{fallback:""},l.a.createElement(M,null)))),l.a.createElement(n.Suspense,{fallback:""},a.loggedIn&&l.a.createElement(P,null)),l.a.createElement(N,null))))}),null),document.querySelector("#app"))}});